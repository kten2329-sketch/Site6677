<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tool ƒë·ªçc Hotmail</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            background: #0a0e12;
            font-family: 'Segoe UI', system-ui, sans-serif;
            padding: 2rem 1rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            color: #e6f1ff;
        }
        .container {
            max-width: 700px;
            width: 100%;
        }
        .card {
            background: #141c24;
            border-radius: 24px;
            border: 1px solid #2a404a;
            padding: 1.8rem;
            margin-bottom: 1.5rem;
        }
        .title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            color: #9ed3e3;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        textarea {
            width: 100%;
            min-height: 140px;
            background: #0c1218;
            border: 1.5px solid #2a4855;
            border-radius: 16px;
            color: white;
            font-family: 'Courier New', monospace;
            padding: 1rem;
            font-size: 0.95rem;
            resize: vertical;
            outline: none;
            margin-bottom: 1rem;
        }
        textarea:focus {
            border-color: #4fb3c9;
        }
        .row {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            align-items: center;
        }
        .btn {
            background: #2a5a5a;
            border: none;
            border-bottom: 3px solid #1a3a3a;
            color: white;
            font-weight: 600;
            padding: 0.8rem 1.8rem;
            border-radius: 40px;
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            font-size: 1rem;
            transition: 0.15s;
        }
        .btn:hover {
            background: #3a7474;
        }
        .btn-clear {
            background: #2a3640;
            border-bottom-color: #1a2228;
        }
        .btn-success {
            background: #1e5f5f !important;
            border-bottom-color: #0e3f3f !important;
        }
        .user-info {
            background: #1a2a30;
            border-radius: 20px;
            padding: 1rem 1.5rem;
            margin-top: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }
        .info-item {
            display: flex;
            flex-direction: column;
        }
        .info-label {
            color: #8ab3bd;
            font-size: 0.75rem;
            text-transform: uppercase;
            margin-bottom: 4px;
        }
        .info-value {
            font-family: 'Courier New', monospace;
            font-size: 1rem;
            color: #e1f0f0;
            word-break: break-all;
        }
        .hotmail-highlight {
            background: #0e3a3a;
            padding: 0.3rem 1rem;
            border-radius: 40px;
            border-left: 4px solid #4fb3c9;
        }
        .read-btn {
            background: #1f8a8a;
            border: none;
            border-bottom: 4px solid #146060;
            color: white;
            font-weight: 700;
            padding: 1rem 2rem;
            border-radius: 60px;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            width: 100%;
            cursor: pointer;
            margin-top: 1rem;
        }
        .read-btn:hover {
            background: #2aa0a0;
        }
        .data-box {
            background: #0a161c;
            border-radius: 16px;
            padding: 1.2rem;
            border: 1px solid #2e6870;
            margin-bottom: 1rem;
            font-family: 'Courier New', monospace;
            word-break: break-all;
            color: #bce5ed;
            min-height: 80px;
        }
        .footer {
            margin-top: 2rem;
            color: #6a8a94;
            text-align: center;
            font-size: 0.8rem;
        }
        .status-text {
            font-size: 0.85rem;
            margin-top: 0.8rem;
            padding: 0.5rem;
            border-radius: 8px;
            background: #0e1a20;
            color: #8ab3bd;
        }
        .success-text {
            color: #8ae0a0;
            background: #1a3a2a;
        }
        .error-text {
            color: #ffb5b5;
            background: #3a2a2a;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- NH·∫¨P D·ªÆ LI·ªÜU -->
        <div class="card">
            <div class="title">üì• D√°n chu·ªói d·ªØ li·ªáu</div>
            
            <textarea id="inputRaw" placeholder="user3242757710300|I@98Kikd0a|email@hotmail.com|refresh_token|client_id|..."></textarea>
            
            <div class="row" style="justify-content: space-between;">
                <div style="display: flex; gap: 12px;">
                    <button class="btn" id="processBtn">‚ö° T√°ch HOTMAIL</button>
                    <button class="btn btn-clear" id="clearBtn">üóëÔ∏è X√≥a</button>
                </div>
                <button class="btn" id="copyBtn">üìã Copy HOTMAIL</button>
            </div>
            <div id="copyStatus" class="status-text"></div>
        </div>

        <!-- HI·ªÇN TH·ªä HOTMAIL + TOKEN -->
        <div class="card" style="background: #0f1e24;">
            <div style="font-size: 1.2rem; font-weight: 600; color: #9fd1df; margin-bottom: 1rem;">
                üì¨ HOTMAIL + TOKEN
            </div>
            
            <div class="data-box" id="hotmailOutput">
                ‚è≥ Ch∆∞a c√≥ d·ªØ li·ªáu
            </div>

            <!-- HI·ªÇN TH·ªä USER, MK V√Ä HOTMAIL T√ÅCH RI√äNG -->
            <div class="user-info">
                <div class="info-item">
                    <span class="info-label">üë§ User</span>
                    <span class="info-value" id="userNameDisplay">---</span>
                </div>
                <div class="info-item">
                    <span class="info-label">üîë MK</span>
                    <span class="info-value" id="passwordDisplay">---</span>
                </div>
                <div class="info-item hotmail-highlight">
                    <span class="info-label">üìß HOTMAIL</span>
                    <span class="info-value" id="hotmailAddress">---</span>
                </div>
            </div>
        </div>

        <!-- N√öT ƒê·ªåC HOTMAIL -->
        <button class="read-btn" id="readHotmailBtn">
            <span style="font-size: 1.5rem;">üì®</span> ƒê·ªåC HOTMAIL
        </button>

        <!-- LINK -->
        <div style="margin-top: 1rem; background: #0e1a20; padding: 1rem 1.5rem; border-radius: 40px; border: 1px solid #2a5a5a; word-break: break-all;">
            <span style="color: #8dbac5;">üîó Link:</span>
            <span id="targetLinkDisplay" style="font-family: monospace; color: #aae0e0;">https://dongvanfb.net/read_mail_box/</span>
        </div>

        <div class="footer">
            ‚ö° T√°ch User ¬∑ MK ¬∑ HOTMAIL ¬∑ Token ‚Äî Copy HOTMAIL ƒë√£ fix l·ªói
        </div>
    </div>

    <script>
        const inputRaw = document.getElementById('inputRaw');
        const hotmailOutput = document.getElementById('hotmailOutput');
        const userNameDisplay = document.getElementById('userNameDisplay');
        const passwordDisplay = document.getElementById('passwordDisplay');
        const hotmailAddress = document.getElementById('hotmailAddress');
        const targetLinkDisplay = document.getElementById('targetLinkDisplay');
        const copyStatus = document.getElementById('copyStatus');
        
        const processBtn = document.getElementById('processBtn');
        const clearBtn = document.getElementById('clearBtn');
        const copyBtn = document.getElementById('copyBtn');
        const readBtn = document.getElementById('readHotmailBtn');

        let hotmailData = '';

        // H√ÄM CHU·∫®N H√ìA D·ªÆ LI·ªÜU TR∆Ø·ªöC KHI COPY
        function chuanHoaDuLieu(text) {
            if (!text) return '';
            // Gi·ªØ nguy√™n ƒë·ªãnh d·∫°ng, ch·ªâ lo·∫°i b·ªè kho·∫£ng tr·∫Øng th·ª´a
            return text.trim();
        }

        // T√ÅCH D·ªÆ LI·ªÜU HOTMAIL
        function tachHotmail() {
            const raw = inputRaw.value.trim();
            if (!raw) {
                alert('Vui l√≤ng d√°n d·ªØ li·ªáu!');
                return;
            }

            const parts = raw.split('|');
            
            // HI·ªÇN TH·ªä USER, MK, HOTMAIL T√ÅCH RI√äNG
            if (parts.length >= 1) userNameDisplay.innerText = parts[0] || '---';
            if (parts.length >= 2) passwordDisplay.innerText = parts[1] || '---';
            if (parts.length >= 3) hotmailAddress.innerText = parts[2] || '---';
            
            // HOTMAIL + TOKEN: t·ª´ index 2 -> h·∫øt
            if (parts.length > 2) {
                hotmailData = chuanHoaDuLieu(parts.slice(2).join('|'));
                hotmailOutput.innerText = hotmailData;
                copyStatus.innerHTML = '‚úÖ S·∫µn s√†ng copy';
                copyStatus.className = 'status-text success-text';
            } else {
                hotmailData = '';
                hotmailOutput.innerText = '‚Äî kh√¥ng c√≥ d·ªØ li·ªáu HOTMAIL ‚Äî';
                copyStatus.innerHTML = '‚ö†Ô∏è Kh√¥ng c√≥ d·ªØ li·ªáu ƒë·ªÉ copy';
                copyStatus.className = 'status-text error-text';
            }
        }

        // X√ìA - C√ì TR·∫†NG TH√ÅI
        function xoaDuLieu() {
            inputRaw.value = '';
            hotmailOutput.innerText = '‚è≥ Ch∆∞a c√≥ d·ªØ li·ªáu';
            userNameDisplay.innerText = '---';
            passwordDisplay.innerText = '---';
            hotmailAddress.innerText = '---';
            hotmailData = '';
            copyStatus.innerHTML = '';
            copyStatus.className = 'status-text';
            
            clearBtn.innerHTML = '‚úÖ ƒê√£ x√≥a';
            clearBtn.classList.add('btn-success');
            
            setTimeout(() => {
                clearBtn.innerHTML = 'üóëÔ∏è X√≥a';
                clearBtn.classList.remove('btn-success');
            }, 1500);
        }

        // COPY HOTMAIL - ƒê√É FIX L·ªñI
        function copyHotmail() {
            if (!hotmailData) {
                copyStatus.innerHTML = '‚ùå Kh√¥ng c√≥ d·ªØ li·ªáu ƒë·ªÉ copy!';
                copyStatus.className = 'status-text error-text';
                return;
            }

            // ƒê·ªïi tr·∫°ng th√°i n√∫t
            copyBtn.innerHTML = '‚è≥ ƒêang copy...';
            copyBtn.classList.add('btn-success');
            copyStatus.innerHTML = '‚è≥ ƒêang x·ª≠ l√Ω...';
            copyStatus.className = 'status-text';

            // T·∫†O TEXTAREA T·∫†M ƒê·ªÇ COPY - C√ÅCH N√ÄY 100% TH√ÄNH C√îNG
            try {
                const tempTextarea = document.createElement('textarea');
                tempTextarea.value = hotmailData;
                tempTextarea.style.position = 'fixed';
                tempTextarea.style.opacity = '0';
                document.body.appendChild(tempTextarea);
                
                // Ch·ªçn v√† copy
                tempTextarea.select();
                tempTextarea.setSelectionRange(0, 99999); // Cho mobile
                const success = document.execCommand('copy');
                
                // X√≥a textarea t·∫°m
                document.body.removeChild(tempTextarea);
                
                if (success) {
                    // Th√†nh c√¥ng
                    copyBtn.innerHTML = '‚úÖ ƒê√£ copy HOTMAIL!';
                    copyStatus.innerHTML = '‚úÖ Copy th√†nh c√¥ng! D·ªØ li·ªáu ƒë√£ v√†o clipboard';
                    copyStatus.className = 'status-text success-text';
                    
                    setTimeout(() => {
                        copyBtn.innerHTML = 'üìã Copy HOTMAIL';
                        copyBtn.classList.remove('btn-success');
                    }, 2000);
                } else {
                    // Th·∫•t b·∫°i - fallback
                    throw new Error('Copy failed');
                }
            } catch (err) {
                // FALLBACK: d√πng Clipboard API v·ªõi text ƒë√£ ƒë∆∞·ª£c chu·∫©n h√≥a
                navigator.clipboard.writeText(hotmailData).then(() => {
                    copyBtn.innerHTML = '‚úÖ ƒê√£ copy HOTMAIL!';
                    copyStatus.innerHTML = '‚úÖ Copy th√†nh c√¥ng! (Clipboard API)';
                    copyStatus.className = 'status-text success-text';
                    
                    setTimeout(() => {
                        copyBtn.innerHTML = 'üìã Copy HOTMAIL';
                        copyBtn.classList.remove('btn-success');
                    }, 2000);
                }).catch(() => {
                    // Th·∫•t b·∫°i ho√†n to√†n - h∆∞·ªõng d·∫´n th·ªß c√¥ng
                    copyBtn.innerHTML = '‚ö†Ô∏è Copy th·ªß c√¥ng';
                    copyStatus.innerHTML = '‚ùå Kh√¥ng th·ªÉ copy t·ª± ƒë·ªông. H√£y b√¥i ƒëen d√≤ng tr√™n v√† nh·∫•n Ctrl+C';
                    copyStatus.className = 'status-text error-text';
                    
                    // Focus v√†o √¥ hi·ªÉn th·ªã d·ªØ li·ªáu
                    hotmailOutput.style.background = '#3a2a2a';
                    hotmailOutput.style.border = '2px solid #ff8a8a';
                    
                    setTimeout(() => {
                        copyBtn.innerHTML = 'üìã Copy HOTMAIL';
                        copyBtn.classList.remove('btn-success');
                        hotmailOutput.style.background = '#0a161c';
                        hotmailOutput.style.border = '1px solid #2e6870';
                    }, 3000);
                });
            }
        }

        // ƒê·ªåC HOTMAIL - T·ª∞ ƒê·ªòNG D√ÅN
        function docHotmail() {
            if (!hotmailData) {
                alert('Ch∆∞a c√≥ d·ªØ li·ªáu HOTMAIL! H√£y t√°ch tr∆∞·ªõc.');
                return;
            }

            const encodedData = encodeURIComponent(hotmailData);
            const finalUrl = 'https://dongvanfb.net/read_mail_box/?data=' + encodedData;
            
            targetLinkDisplay.innerText = finalUrl;
            window.open(finalUrl, '_blank');
        }

        // G·∫ÆN S·ª∞ KI·ªÜN
        processBtn.onclick = tachHotmail;
        clearBtn.onclick = xoaDuLieu;
        copyBtn.onclick = copyHotmail;
        readBtn.onclick = function(e) {
            e.preventDefault();
            docHotmail();
        };

        // H·ªó tr·ª£ copy nhanh khi click v√†o d·ªØ li·ªáu
        hotmailOutput.ondblclick = function() {
            if (hotmailData) {
                copyHotmail();
            }
        };
    </script>
</body>
</html>
